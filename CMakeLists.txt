CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
PROJECT(libfluentd)



SET(EXECUTABLE_OUTPUT_PATH ${PROJECT_BINARY_DIR}/bin)
SET(LIBRARY_OUTPUT_PATH ${PROJECT_BINARY_DIR}/lib)

# cmake_policy(SET CMP0015 NEW)

INCLUDE_DIRECTORIES(${INC_DIR} ./src)
LINK_DIRECTORIES(${LIB_DIR})

# Build library

FILE(GLOB BASESRCS "src/*.c" "src/*.h")
FILE(GLOB TESTSRCS "test/*.c")
FILE(GLOB HEADERS "src/fluentd/*.h")

ADD_LIBRARY(fluentd SHARED ${BASESRCS})
TARGET_LINK_LIBRARIES(fluentd msgpack)

INSTALL(FILES src/fluentd.h DESTINATION include/)
INSTALL(FILES ${HEADERS} DESTINATION include/fluentd)


